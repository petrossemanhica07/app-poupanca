<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <title>Poupan√ßa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#22c55e">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link href="styles.css" rel="stylesheet">
</head>
<body>
  <header class="app-header">
    <h1>Poupan√ßa</h1>
    <div class="header-actions">
      <span class="badge">Ol√°, <strong id="userName">‚Äî</strong></span>
      <button id="btnLogout">Sair</button>
    </div>
  </header>

  <main class="app-content">
    <!-- Home -->
    <section id="home" class="screen active">
      <div class="card">
        <div class="kpi">
          <div class="value" id="homeSaldo">MZN 0,00</div>
          <div>
            <div class="label">Saldo do grupo atual</div>
            <div class="hint">Grupo: <span id="homeGrupo">‚Äî</span></div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px 0;">Sugest√µes</h3>
        <ul style="margin:0; padding-left:16px;">
          <li>Abra a reuni√£o de hoje antes de lan√ßar movimentos.</li>
          <li>Mantenha o cadastro de membros atualizado.</li>
          <li>Use penalidades para atrasos quando necess√°rio.</li>
        </ul>
      </div>
    </section>

    <!-- Groups / Operacional -->
    <section id="groups" class="screen">
      <div class="grid grid-2">
        <div class="card">
          <div class="label">Grupo</div>
          <div class="row">
            <select id="groupSel" style="flex:1;"></select>
            <button class="ghost" id="btnCreateGroup" title="Criar grupo">+ Grupo</button>
          </div>
          <hr class="sep">
          <div class="row">
            <span class="badge">Saldo: <strong id="groupBalance">MZN 0,00</strong></span>
            <span class="badge">Reuni√£o: <span id="meetingStatus">‚Äî</span></span>
          </div>
          <div class="row" style="margin-top:8px;">
            <button id="btnOpen">Abrir reuni√£o</button>
            <button id="btnClose" class="danger">Fechar reuni√£o</button>
          </div>
        </div>

        <div class="card">
          <div class="label">Lan√ßamentos r√°pidos</div>
          <div class="row" style="margin-bottom:8px;">
            <select id="memberSel" style="flex:1;"></select>
            <button class="ghost" id="btnAddMember">+ Membro</button>
          </div>
          <div class="row">
            <button id="btnContrib">Contribui√ß√£o</button>
            <button id="btnLoan">Empr√©stimo</button>
            <button id="btnRepay">Pagamento</button>
            <button id="btnPenalty">Multa</button>
            <button id="btnPayout">Distribui√ß√£o</button>
          </div>
          <div class="hint" style="margin-top:8px;">Use estes bot√µes durante a reuni√£o para lan√ßar os movimentos.</div>
        </div>
      </div>
    </section>

    <!-- Admin -->
    <section id="admin" class="screen">
      <div class="card">
        <h3 style="margin-top:0;">Resumo do sistema</h3>
        <div class="row">
          <div class="badge">Grupos: <strong id="kpiGrupos">0</strong></div>
          <div class="badge">Membros: <strong id="kpiMembros">0</strong></div>
          <div class="badge">Caixa total: <strong id="kpiCaixa">MZN 0,00</strong></div>
        </div>
        <h4 style="margin:12px 0 6px 0;">√öltimas 10 transa√ß√µes</h4>
        <table class="table">
          <thead><tr><th>ID</th><th>Grupo</th><th>Membro</th><th>Tipo</th><th>Valor</th><th>Multa</th><th>Data</th></tr></thead>
          <tbody id="ultimas"></tbody>
        </table>
      </div>

      <div class="card">
        <h3 style="margin-top:0;">Relat√≥rio por grupo</h3>
        <div class="row">
          <select id="adminGroupSel"></select>
          <span class="badge">Saldo: <strong id="gSaldo">MZN 0,00</strong></span>
        </div>
        <h4 style="margin:12px 0 6px 0;">Ranking de contribui√ß√µes</h4>
        <table class="table">
          <thead><tr><th>#</th><th>Membro</th><th>Total</th></tr></thead>
          <tbody id="ranking"></tbody>
        </table>
      </div>
    </section>

    <!-- Settings -->
    <section id="settings" class="screen">
      <div class="card">
        <h3 style="margin:0 0 8px 0;">Configura√ß√µes</h3>
        <div class="hint">Por enquanto: login/sair, instalar PWA e prefer√™ncias futuras.</div>
        <div class="row" style="margin-top:10px;">
          <button id="btnLogout">Terminar sess√£o</button>
        </div>
      </div>
    </section>
  </main>

  <nav class="bottom-nav">
    <button class="active" data-screen="home"><div class="icon">üè†</div><span>In√≠cio</span></button>
    <button data-screen="groups"><div class="icon">üë•</div><span>Grupos</span></button>
    <button class="nav-admin hidden" data-screen="admin"><div class="icon">üìä</div><span>Admin</span></button>
    <button data-screen="settings"><div class="icon">‚öôÔ∏è</div><span>Config</span></button>
  </nav>

  <!-- Login modal -->
  <div id="loginModal" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);z-index:50;">
    <div class="card" style="width:min(420px,92vw);">
      <h3 style="margin:0 0 8px 0;">Entrar</h3>
      <div class="label">Email</div>
      <input type="email" id="email" placeholder="admin@local" value="admin@local">
      <div class="label" style="margin-top:8px;">Senha</div>
      <input type="password" id="senha" placeholder="admin123" value="admin123">
      <div class="row" style="margin-top:12px; justify-content:flex-end;">
        <button id="btnDoLogin">Entrar</button>
      </div>
      <div class="hint" style="margin-top:6px;">Dica: admin@local / admin123 (mude depois)</div>
    </div>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script type="module" src="ui.js"></script>
</body>
</html>